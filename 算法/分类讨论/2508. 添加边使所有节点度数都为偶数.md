# [2508. æ·»åŠ è¾¹ä½¿æ‰€æœ‰èŠ‚ç‚¹åº¦æ•°éƒ½ä¸ºå¶æ•°](https://leetcode.cn/problems/add-edges-to-make-degrees-of-all-nodes-even/)

## é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæœ‰ nÂ ä¸ªèŠ‚ç‚¹çš„ æ— å‘Â å›¾ï¼ŒèŠ‚ç‚¹ç¼–å·ä¸ºÂ 1Â åˆ°Â nÂ ã€‚å†ç»™ä½ æ•´æ•°Â nÂ å’Œä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„Â edgesÂ ï¼Œå…¶ä¸­Â edges[i] = [ai, bi]Â è¡¨ç¤ºèŠ‚ç‚¹Â ai å’ŒÂ biÂ ä¹‹é—´æœ‰ä¸€æ¡è¾¹ã€‚å›¾ä¸ä¸€å®šè¿é€šã€‚

ä½ å¯ä»¥ç»™å›¾ä¸­æ·»åŠ  è‡³å¤šÂ ä¸¤æ¡é¢å¤–çš„è¾¹ï¼ˆä¹Ÿå¯ä»¥ä¸€æ¡è¾¹éƒ½ä¸æ·»åŠ ï¼‰ï¼Œä½¿å¾—å›¾ä¸­æ²¡æœ‰é‡è¾¹ä¹Ÿæ²¡æœ‰è‡ªç¯ã€‚

å¦‚æœæ·»åŠ é¢å¤–çš„è¾¹åï¼Œå¯ä»¥ä½¿å¾—å›¾ä¸­æ‰€æœ‰ç‚¹çš„åº¦æ•°éƒ½æ˜¯å¶æ•°ï¼Œè¿”å›Â trueÂ ï¼Œå¦åˆ™è¿”å›Â falseÂ ã€‚

ç‚¹çš„åº¦æ•°æ˜¯è¿æ¥ä¸€ä¸ªç‚¹çš„è¾¹çš„æ•°ç›®ã€‚

Â 

## ç¤ºä¾‹ 1ï¼š
![image](https://user-images.githubusercontent.com/72189350/210072037-18ee8c5d-a375-4181-a54e-206f4aa75270.png)
```
è¾“å…¥ï¼šn = 5, edges = [[1,2],[2,3],[3,4],[4,2],[1,4],[2,5]]
è¾“å‡ºï¼štrue
è§£é‡Šï¼šä¸Šå›¾å±•ç¤ºäº†æ·»åŠ ä¸€æ¡è¾¹çš„åˆæ³•æ–¹æ¡ˆã€‚
æœ€ç»ˆå›¾ä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½è¿æ¥å¶æ•°æ¡è¾¹ã€‚
```

## ç¤ºä¾‹ 2ï¼š
![image](https://user-images.githubusercontent.com/72189350/210072091-1335d7a9-75f0-402a-a7ec-f2f3c363a6fe.png)

```
è¾“å…¥ï¼šn = 4, edges = [[1,2],[3,4]]
è¾“å‡ºï¼štrue
è§£é‡Šï¼šä¸Šå›¾å±•ç¤ºäº†æ·»åŠ ä¸¤æ¡è¾¹çš„åˆæ³•æ–¹æ¡ˆã€‚
```
## ç¤ºä¾‹ 3ï¼š
![image](https://user-images.githubusercontent.com/72189350/210072108-12947857-30f7-4c64-a3b1-b4169fcba006.png)

```
è¾“å…¥ï¼šn = 4, edges = [[1,2],[1,3],[1,4]]
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šæ— æ³•æ·»åŠ è‡³å¤š 2 æ¡è¾¹å¾—åˆ°ä¸€ä¸ªç¬¦åˆè¦æ±‚çš„å›¾ã€‚
```

## æç¤ºï¼š
```
3 <= n <= 10e5
2 <= edges.length <= 10e5
edges[i].length == 2
1 <= ai, bi <= n
ai != bi
å›¾ä¸­ä¸ä¼šæœ‰é‡è¾¹
```

## æ€è·¯åˆ†æï¼š

é¢˜ç›®è¦æ±‚è®©æˆ‘ä»¬åœ¨å›¾ä¸­åŠ ä¸¤æ¡è¾¹ï¼ˆä¹Ÿå¯ä»¥ä¸åŠ ï¼‰ï¼Œä½¿å¾—æ‰€æœ‰ç‚¹åº¦æ•°éƒ½ä¸ºå¶æ•°ã€‚

é‚£æˆ‘ä»¬å¯ä»¥å…ˆç”¨ä¸€ä¸ªæ•°ç»„ç»Ÿè®¡ä¸€ä¸‹æ‰€æœ‰ç‚¹çš„åº¦æ•°ï¼Œç„¶åæ ¹æ®ç‚¹çš„æƒ…å†µæ¥æ“ä½œï¼Œç»Ÿè®¡å®Œä¼šå‘ç°æˆ‘ä»¬æœ‰ä¸¤ç±»ç‚¹ï¼Œå¥‡æ•°ç±»å’Œå¶æ•°ç±»ã€‚

å¯¹æ­¤ï¼Œåœ¨æˆ‘ä»¬æ“ä½œçš„æ—¶å€™ï¼Œå¯¹äºå¢åŠ ä¸€æ¡è¾¹ï¼Œåœ¨è¿™ä¸¤ç±»ç‚¹ä¸Šæ˜¯æˆªç„¶ä¸åŒçš„è¡¨ç°ã€‚

- é¦–å…ˆæ˜¯å¥‡æ•°è¿å¥‡æ•°ï¼Œå¯¹æ­¤ï¼Œæˆ‘ä»¬å¿…ç„¶å¯ä»¥è®©å…¶åœ¨ä¸¤ä¸ªå¥‡æ•°ç‚¹éƒ½å˜ä¸ºå¶æ•°ç‚¹ï¼Œå› æ­¤å¥‡æ•°ç‚¹-2
- å¥‡æ•°è¿å¶æ•°+å¥‡æ•°è¿å¶æ•°ï¼šè®©å…¶å¥‡æ•°ç‚¹1è¿æ¥å¶æ•°ç‚¹ï¼Œå¥‡æ•°ç‚¹2ä¹Ÿè¿æ¥å¶æ•°ç‚¹ï¼Œè¿™æ ·ï¼Œå¶æ•°ç‚¹åŠ äº†ä¸¤æ¬¡ï¼ŒåŒæ ·æ˜¯å¶æ•°ï¼Œè€Œä¸¤ä¸ªå¥‡æ•°ç‚¹ä¹Ÿå˜æˆå¶æ•°ã€‚å› æ­¤å¥‡æ•°ç‚¹-2
- å¶æ•°è¿å¥‡æ•°ï¼Œå¯¹æ­¤ï¼Œæˆ‘ä»¬å¶æ•°+1ä¼šå˜æˆå¥‡æ•°ï¼Œè€Œå¥‡æ•°+1ä¼šå˜æˆå¶æ•°ï¼Œå› æ­¤è¶‹äºå¹³è¡¡ï¼Œå¥‡æ•°ç‚¹-0
- å¶æ•°è¿å¶æ•°ï¼Œå¯¹æ­¤ï¼Œæˆ‘ä»¬å¶æ•°+1ä¼šå˜æˆå¥‡æ•°ï¼Œå› æ­¤æœ€åå¥‡æ•°ç‚¹ä¼š+2

ç»è¿‡ä¸Šé¢çš„åˆ†æï¼Œæ˜¾ç„¶åªæœ‰æ“ä½œ1å’Œæ“ä½œ2ï¼Œå¯ä»¥è§£å†³æˆ‘ä»¬çš„é—®é¢˜ï¼Œæˆ‘ä»¬å†æ¥çœ‹é¢˜ç›®ç»™çš„è¦æ±‚ï¼Œæœ€å¤šåªèƒ½å¢åŠ ä¸¤ä¸ªè¾¹ã€‚

å› æ­¤ï¼Œå¦‚æœå¥‡æ•°ç‚¹æ€»æ•° > 4 åˆ™æ˜¾ç„¶æ˜¯æˆ‘ä»¬æ— æ³•æ“ä½œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¤„ç†åªæœ‰0ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4 äº”ç§æƒ…å†µã€‚

è€Œå¯¹äºå¥‡æ•°çš„æƒ…å†µï¼Œç”±äºæˆ‘ä»¬æ“ä½œåªå¯ä»¥-2 å’Œ -0,å› æ­¤å¥‡æ•°çš„æƒ…å†µä¹Ÿæ˜¯æ— è§£çš„æƒ…å†µã€‚

ğŸ†—ï¼Œç°åœ¨æˆ‘ä»¬åªéœ€è¦æ¥å¤„ç†0ï¼Œ2ï¼Œ4è¿™ä¸‰ç§æƒ…å†µã€‚

- 0ï¼Œå¯¹äºè¿™ä¸ªæƒ…å†µï¼Œæˆ‘ä»¬æ— éœ€ä»»ä½•æ“ä½œï¼Œç›´æ¥æ”¾å›trueå³å¯
- 2ï¼Œå¯¹äºè¿™ä¸ªæƒ…å†µï¼Œæˆ‘ä»¬åªéœ€è¦æ‰¾å‡ºä¸¤ä¸ªæ²¡æœ‰é‡è¾¹çš„å¥‡æ•°ç‚¹ç›¸è¿ï¼Œæˆ–è€…ï¼Œæ‰¾åˆ°ä¸€ä¸ªå¶æ•°ç‚¹ï¼Œè¿™ä¸ªå¶æ•°ç‚¹å’Œä¸¤ä¸ªå¥‡æ•°ç‚¹ç›´æ¥éƒ½æ²¡æœ‰ç›¸è¿å³å¯ã€‚
- 4ï¼Œå¯¹äºè¿™ä¸ªæƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦æ‰¾å‡ºä¸¤ä¸ªå¯¹å¯ä»¥ä¸¤ä¸¤ç›¸è¿çš„ç‚¹å³å¯ï¼Œåœ¨è¿™é‡Œä¸ºäº†æ–¹ä¾¿ï¼Œç›´æ¥å…¨æ’åˆ—æ‰€æœ‰æƒ…å†µï¼Œä¾æ¬¡åˆ¤æ–­å³å¯ï¼Œå› ä¸ºåªæœ‰4ä¸ªç‚¹ï¼Œå…¨æ’åˆ—ä¹Ÿåªéœ€è¦4!ä¸ªæ“ä½œã€‚

## CPP
```cpp
class Solution {
public:
    string get(int a,int b) {
        if (a > b) swap(a,b);
        return to_string(a) + to_string(b);
    }
    bool isPossible(int n, vector<vector<int>>& edges) {
        unordered_set<string> S;
        vector<int> in(n + 1,0),v;
        for (auto& e : edges) {
            int a = e[0],b = e[1];
            in[a] ++ ,in[b] ++;
            S.insert(get(a,b));
        }
        for (int i = 1; i <= n; i ++ ) 
            if (in[i] & 1) v.push_back(i);
        if (v.size() == 0) return true;
        else if (v.size() == 2) {
            int a = v[0],b = v[1];
            if (!S.count(get(a,b))) return true;
            for (int i = 1; i <= n; i ++ ) 
                if (a != i && b != i && !S.count(get(a,i)) && !S.count(get(b,i)))
                    return true;
        } else if (v.size() == 4) {
            for (int i = 0; i < 24; i ++ ) {  
                int a = v[0],b = v[1],c = v[2],d = v[3];
                if (!S.count(get(a,b)) && !S.count(get(c,d)))
                    return true;
                next_permutation(v.begin(),v.end());
            }
        }
        return false;
    }
};
```

## Typescript
```typescript
let st = new Array<boolean>(4).fill(false);
let arr = new Array<number>(4).fill(0);
let S = new Set<string>()
function get(a:number,b:number): string {
    if (a > b) [a,b] = [b,a]
    return String(a) + String(b);
}

function dfs(v:number[],u:number): boolean {
    if (u >= 4) {
        let a = v[arr[0]],b = v[arr[1]],c = v[arr[2]],d = v[arr[3]];
        if (!S.has(get(a,b)) && !S.has(get(c,d))) return true;
        else return false;
    }

    for (let i = 0; i < 4; i ++ ) {
        if (!st[i]) {
            st[i] = true;
            arr[u] = i;
            if (dfs(v,u + 1)) return true;
            st[i] = false;
        }
    }

    return false;
}

function isPossible(n: number, edges: number[][]): boolean {
    let ins = new Array<number>(n + 1).fill(0);
    let v = [];
    S.clear(),st.fill(false),arr.fill(0);
    for (let e of edges) {
        const a = e[0],b = e[1];
        ins[a] ++,ins[b] ++;
        S.add(get(a,b))
    }
    for (let i = 1; i <= n; i ++ ) 
        if (ins[i] & 1) v.push(i)
    if (v.length === 0) {
        return true;
    } else if (v.length === 2) {
        let a = v[0],b = v[1];
        if (!S.has(get(a,b))) return true;
        for (let i = 1; i <= n; i ++ )
            if (a != i && b != i && !S.has(get(a,i)) && !S.has(get(b,i)))
                return true
    } else if (v.length === 4) {
        return dfs(v,0);
    }
    return false;
};
```
