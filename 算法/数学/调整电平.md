# [乐鑫02.调整电平](https://leetcode.cn/contest/espressif-2021/problems/i4tX1E/)(约数)

## 题目描述

某实验逻辑电路中，初始时有 cnt 个观测点处于低电平状态。

对于某个观测点的电平调整意味着：如果观测点处于低电平，会被调整为高电平；而观测点处于高电平，会被调整为低电平。

第 1 轮，每个观测点调整一次电平。即，所有观测点处于高电平；

第 2 轮，每两个观测点调整一次电平。即，第 1、3、5 ... 个观察点不调整，第 2、4、6 ... 个观察点调整；

第 3 轮，每三个观测点调整一次电平。即，第 1、2、4、5 ... 个观察点不调整，第 3、6 ... 个观察点调整；

第 i 轮，每 i 观测点调整一次电平。 而第 cnt 轮，你只调整最后一个观测点的电平。

请找出 cnt 轮之后有多少处于高电平状态的观测点。

 

## 示例 1：
```
输入：cnt = 4
输出：2 
解释：
初始时, 电平状态为 [低, 低, 低，低],
第一轮后, 电平状态 [高, 高, 高, 高],
第二轮后, 电平状态 [高, 低, 高, 低],
第三轮后, 电平状态 [高, 低, 低, 低],
第四轮后, 电平状态 [高, 低, 低, 高], 

最终有 2 个处于高电平状态的观测点，因此返回 2
```

## 示例 2：
```
输入：cnt = 0
输出：0
示例 3：

输入：cnt = 2
输出：1
```

## 提示：
```
0 <= cnt <= 10e9
```

## 思路分析：
题意应该很好懂，其实就是问我们求得n个调整次数为奇数的个数。我觉得需要注意的就是数据量有10e9，这意味着我们时间复杂度必须控制在logn。

其实直接看感觉还是很难看出来的，在每一轮的更新中我们的操作都为往前移一位。第一次就是全部数都要操作，第二次就是每隔两位操作，第三次就是每隔三位操作。

因此每次其实操作的是能整除第k轮的数，因此不难发现其实就是求每个数的约数的个数，如果该数的约数为奇数则合法。

分析到这里会发现还是没办法做，一般来说我们求约数就是用试除法，在这个数据量下必然是会超时的。因此我们还需要在发现一些性质。

这个性质比较难想，我就先给出答案来：约数为奇数的数必然是平方数。

下面我来解释一下为什么这个是对的。

在合数中，任何一个合数n必然可以被拆分为n = a * b,因此我们可以推出 n <= a * b

所以我们可以令 b 为 a，得出 n <= a * a，sqrt(n) <= a （这里的sqrt(n) 是根号n的意思）

因此在[1,sqrt(n)]的范围内我们必然可以找到n的一个约数。

所以在这个范围内我们每找到一个n的约数a，就可以用 n/a 的方式求出与之对应的另一个约数，所以不难发现约数都是成对出现的。

而只有在约数a == n / a 的情况下，因为两个数都相同所以只有一个。

因此得出结论只有平方数约数才是奇数。

其实上面这个分析过程，其实也不是凭空想出来的，来源于试除法求约数这个算法。

那么代码就很容易了，直接找平方数即可。

ps:最近发现很多问题其实是见识的不够多，大部分问题都不是所谓的智力题，很多看似玄学的答案实际上是来源于某个定理or知识点。因此在做题过程并不是凭空去发明解法，只需要把掌握的知识灵活运用出来就能拿到很好的成绩。

```cpp
class Solution {
public:
    int adjustLevel(int n) {
        int i = 1,res = 0;
        while (i * i <= n) {
            res ++;
            i ++;
        } 
        return res;
    }
};
```
